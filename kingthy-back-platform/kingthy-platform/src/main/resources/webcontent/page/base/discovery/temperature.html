<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="renderer" content="webkit|ie-comp|ie-stand"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link rel="stylesheet" type="text/css" href="../../../css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="../../../css/h-ui/css/H-ui.css"/>
    <link rel="stylesheet" type="text/css" href="../../../css/plugins/bootstrap-table/bootstrap-table.min.css"/>
    <!-- Sweet Alert -->
    <link rel="stylesheet" type="text/css" href="../../../css/plugins/sweetalert/sweetalert.css"/>
    <title>温度</title>
</head>
<body>
<!--导航-->
<nav class="breadcrumb"><i class="glyphicon glyphicon-home"></i> 首页 <span class="c-gray en">&gt;</span> 发现数据 <span
        class="c-gray en">&gt;</span> 温度
    <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px"
       href="javascript:location.replace(location.href);" title="刷新">
        <i class="glyphicon glyphicon-refresh"></i></a>
</nav>
<div class="page-container">
    <!--操作按钮-->
    <div class="cl pd-5 bg-1 bk-gray mt-20">	<span class="l">

		       <a class="btn btn-sm btn-primary" data-title="添加分类" href="javascript:to_add()">

                   <i class="glyphicon glyphicon-plus"></i> 新增</a>

		    </span>
    </div>
    <!--数据列表-->
    <div id="data_list" class="mt-20">
        <table id="tablelist" class="table table-border table-bordered table-hover table-bg">
            <thead>
            <tr class="text-c">
                <th data-field="id" data-visible="false">id</th>
                <th data-field="className" data-halign="left" data-valign="middle" data-align="left">分类名称</th>
                <th data-field="status" data-formatter="statusFormatter" data-halign="left" data-valign="middle"
                    data-align="left">状态
                </th>
                <th data-field="description" data-halign="left" data-valign="middle" data-align="left">描述</th>
                <th data-field="action" data-formatter="actionFormatter" data-events="operateEvents"
                    data-halign="center" data-valign="middle" data-align="center">操作
                </th>
            </tr>
            </thead>
        </table>
    </div>
</div>
<script type="text/javascript" src="../../../js/base.js"></script>
<script type="text/javascript" src="../../../js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../../plugins/bootstrap-table/bootstrap-table.min.js"></script>
<script type="text/javascript" src="../../../plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
<script type="text/javascript" src="../../../js/table.js"></script>
<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript">
    //初始化表格
    var setting = {
        tableId: '#tablelist',
        url: zmme + "/baseData/query",
        pagination: true,
        pageSize: 10,
        method: "post"
    };
    var queryParam = {type: 6, status: true};
    initTable(setting, queryParam);

    //添加操作按钮
    function actionFormatter(value, row, index) {
        var hideOrView = '显示';
        var color = 'red';
        if (row.status) {
            hideOrView = '隐藏';
            color = 'blue';
        }
        var html = '<div>';
        html += '<a class="btnhideOrView btn"  title="' + hideOrView + '"   ><i style="color:' + color + '" class="glyphicon glyphicon-ban-circle"></i></a>';
        html += '<a class="btnEdit btn"  title="编辑"   ><i  class="glyphicon glyphicon-edit"></i></a>';
        html += '<a class="btnDel  btn"  title="删除"   ><i class="glyphicon glyphicon-trash"></i></a>';
        html += '</div>';
        return [
            html
        ].join('');
    }
    //注册按钮点击事件
    window.operateEvents = {

        'click .btnhideOrView': function (e, value, row, index) {
            hidden(row);
        },
        'click .btnEdit': function (e, value, row, index) {
            edit(row);
        },
        'click .btnDel': function (e, value, row, index) {
            del(row);
        }
    };
    //隐藏
    function hidden(row) {
        axios.put(zmme + "/baseData/update", {uuid: row.uuid, status: !row.status}).then(function (response) {
            var result = response.data;
            if (result.code == 0) {
                swal(row.status ? "隐藏" : "显示" + "成功！", result.message, "success");
                refreshTable(setting.tableId);
            } else {
                swal(row.status ? "隐藏" : "显示" + "失败！", result.message, "error");
            }
        }).catch(function (response) {

        })
    }
    //编辑
    function edit(row) {
        layer_show("编辑温度详情", "temperature_edit.html?uuid=" + row.uuid, 800, 500, function () {
            refreshTable(setting.tableId);
        });
    }
    //删除
    function del(row) {
        swal({
            title: "您确定要删除这条记录吗",
            text: "删除后将无法恢复，请谨慎操作！",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "删除",
            closeOnConfirm: false
        }, function () {
            axios.delete(zmme + "/baseData/delete/" + row.uuid).then(function (response) {
                var result = response.data;
                if (result.code == 0) {
                    swal("删除成功！", "您已经永久删除了这条信息。", "success");
                    refreshTable(setting.tableId);
                } else {
                    swal("删除失败！", result.message, "error");
                }
            }).catch(function (response) {

            })
        });
    }
    function statusFormatter(value, row, index) {
        var div = "-";
        if (value) {
            div = "显示";
        } else {
            div = "隐藏";
        }
        return div;
    }
    function to_add() {
        layer_show("新增温度", "temperature_edit.html", 800, 500, function () {
            setTimeout(function () {
                refreshTable(setting.tableId);
            }, 100)
        });
    }
</script>
<!--/请在上方写此页面业务相关的脚本-->
</body>

</html>
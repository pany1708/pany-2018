<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
	<meta http-equiv="Cache-Control" content="no-siteapp" />
	<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5shiv.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<![endif]-->
	<link rel="stylesheet" type="text/css" href="../../../css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="../../../css/h-ui/css/H-ui.css" />
	<link rel="stylesheet" type="text/css" href="../../../css/plugins/bootstrap-table/bootstrap-table.min.css">
	<!-- Sweet Alert -->
	<link rel="stylesheet" type="text/css" href="../../../css/plugins/sweetalert/sweetalert.css">

	<!--[if IE 6]>
<script type="text/javascript" src="lib/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->
	<title>连衣裙列表</title>
</head>

<body>
	<!--导航-->
	<nav class="breadcrumb"><i class="glyphicon glyphicon-home"></i> 首页 <span class="c-gray en">&gt;</span> 基础数据 <span class="c-gray en">&gt;</span>		服装数据 <span class="c-gray en">&gt;</span> 连衣裙数据
		<a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);"
		 title="刷新"><i class="glyphicon glyphicon-refresh"></i></a>
	</nav>
	<ul class="nav nav-tabs" id="myTab">
		<li class="active"><a href="#tab-pane" coatType="0">连衣裙轮廓数据</a></li>
		<li><a href="#tab-pane" coatType="1">袖长数据</a></li>
		<li><a href="#tab-pane" coatType="2">款式数据</a></li>
		<li><a href="#tab-pane" coatType="3">腰型数据</a></li>
		<li><a href="#tab-pane" coatType="4">衣门禁数据</a></li>
		<li><a href="#tab-pane" coatType="5">群型数据</a></li>
		<li><a href="#tab-pane" coatType="6">袖长数据</a></li>
		<li><a href="#tab-pane" coatType="7">袖型数据</a></li>
		<li><a href="#tab-pane" coatType="8">领型数据</a></li>
	</ul>
	<div class="page-container">
		<!--操作按钮-->
		<div class="cl pd-5 bg-1 bk-gray mt-20">
			<span class="l">
		           <a class="btn btn-sm btn-primary" data-title="新增"  onclick="add()" href="javascript:;"><i class="glyphicon glyphicon-plus"></i> 新增</a>
		        </span>
		</div>
		<div class="tab-content">
			<div class="tab-pane active">
				<div id="data_list" class="mt-20">
					<table id="tablelist" class="table table-border table-bordered table-hover">
						<thead>
							<tr class="text-c">
								<th data-formatter="indexFormatter" data-width="50px">序号</th>
								<th data-field="id" data-visible="false">uuid</th>
								<th data-field="className" data-halign="left" data-valign="middle" data-align="left">分类名称</th>
								<th data-field="goodsNum" data-halign="left" data-valign="middle" data-align="left">作品数量</th>
								<th data-field="status" data-formatter="statusFormatter" data-halign="left" data-valign="middle" data-align="left">状态</th>
								<th data-field="description" data-halign="left" data-valign="middle" data-align="left">描述</th>
								<th data-field="action" data-width="150px" data-formatter="actionFormatter" data-events="operateEvents" data-halign="center"
								 data-valign="middle" data-align="center">操作</th>
							</tr>
						</thead>
					</table>
				</div>
			</div>
		</div>
	</div>




    <script type="text/javascript" src="../../../js/base.js"></script>
	<script type="text/javascript" src="../../../js/table.js"></script>
	<script type="text/javascript" src="../../../plugins/bootstrap-table/bootstrap-table.min.js"></script>
	<script type="text/javascript" src="../../../plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
	<script type="text/javascript">
		//类型，初始为0：衣服版型数据
		var coatType = 0;
		$(function () {

			$('#myTab a:first').tab('show');

			var setting = {
				tableId: '#tablelist',
				url: zmme + '/dressCategory/query',
				method: 'post',
				pagination: true
			};
			var searchConditon = { type: coatType };
			//初始化表格
			initTable(setting, searchConditon);
		})
		$('#myTab a').click(function (e) {

			e.preventDefault();
			$(this).tab('show');
			coatType = e.target.attributes['coatType'].value;

			var setting = {
				tableId: '#tablelist',
				url: zmme + '/dressCategory/query',
			};
			var searchConditon = { type: coatType };
			//查询数据
			searchTable(setting, searchConditon);
		})


		//添加操作按钮
		function actionFormatter(value, row, index) {
			var hideOrView = '显示';
			var color = 'red';
			if (row.status) {
				hideOrView = '隐藏';
				color = 'blue';
			}
			var html = '<div>';
			html += '<a class="btnHideOrView btn"  title="' + hideOrView + '"   ><i  style="color:' + color + '" class="glyphicon glyphicon-ban-circle"></i></a>';
			html += '<a class="btnEdit btn"  title="编辑"   ><i  class="glyphicon glyphicon-edit"></i></a>';
			html += '<a class="btnDel  btn"  title="删除"   ><i class="glyphicon glyphicon-trash"></i></a>';
			html += '</div>';
			return [
				html
			].join('');
		}
		//注册按钮点击事件
		window.operateEvents = {
			'click .btnHideOrView': function (e, value, row, index) {
				hideOrView(row);
			},
			'click .btnEdit': function (e, value, row, index) {
				edit(row);
			},

			'click .btnDel': function (e, value, row, index) {
				del(row);
			}
		};
		//新增
		function add(row) {
			//row为当前行数据，json数据
			//window.location.href="coat-category-detail.html";
			layer_show("新增->连衣裙", "dress-category-detail.html?operate=add&coatType=" + coatType, 800, 450, function () {
				refreshTable('#tablelist');
			})

		}
		//隐藏或显示
		function hideOrView(row) {
			//row为当前行数据，json数据
			var data = { id: row.id, uuid: row.uuid };
			if (row.status) {
				data.status = false;
			} else {
				data.status = true;
			}
			axios.put(zmme + "/dressCategory/update", data).then((response) => {
				var result = response.data;
				if (result.code == 0) {
					refreshTable('#tablelist');
				} else {
					swal("错误", result.message, "error");
				}

			});
		}
		//编辑
		function edit(row) {
			//row为当前行数据，json数据
			layer_show("编辑->连衣裙", "dress-category-detail.html?operate=update&coatType=" + coatType + "&uuid=" + row.uuid, 800, 450, function () {
				refreshTable('#tablelist');
			});
		}
		//删除
		function del(row) {
			//row为当前行数据，json数据
			swal({
				title: "您确定要删除这条信息吗",
				text: "删除后将无法恢复，请谨慎操作！",
				type: "warning",
				showCancelButton: true,
				confirmButtonColor: "#DD6B55",
				confirmButtonText: "删除",
				closeOnConfirm: false
			}, function () {
				console.log(row.uuid);
				axios.delete(zmme + "/dressCategory/delete/" + row.uuid).then((response) => {
					var result = response.data;
					if (result.code == 0) {
						refreshTable('#tablelist');
						swal("删除成功！", "您已经永久删除了这条信息。", "success");

					} else {
						swal("删除失败！", result.message, "error");
					}

				});

			});
		}
		function timeFormatter(value, row, index) {
			var time = new Date(value);
			return time.format("yyyy-MM-dd");
		}
		function statusFormatter(value, row, index) {
			var div = "-";
			if (value == 0) {
				div = "隐藏";
			}
			if (value == 1) {
				div = "显示";
			}
			return div;
		}
	</script>

</body>

</html>
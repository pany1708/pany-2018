<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.kingthy.mapper.PartsCategoryMapper">

    <select id="findFiles" resultType="com.kingthy.dto.PartsFileDto">
      SELECT uuid,image,model_file as modelFile FROM parts_category
      WHERE del_flag IS FALSE
    </select>

    <select id="findByPage" parameterType="com.kingthy.entity.PartsCategory" resultType="com.kingthy.entity.PartsCategory">
        SELECT id,create_date createDate,modify_date modifyDate,version,class_name className,uuid,status,image,sn,type,
        model_file modelFile
        FROM parts_category
        WHERE del_flag IS FALSE
        <if test=" sn!=null and sn!='' ">
          AND sn LIKE concat('%', #{sn}, '%')
        </if>
        <if test=" className!=null and className!='' ">
          AND class_name LIKE concat('%', #{className}, '%')
        </if>
        ORDER BY create_date DESC
    </select>

    <select id="findByPage_COUNT"  resultType="Long">
        SELECT count(uuid)
        FROM parts_category
        WHERE del_flag IS FALSE
        <if test=" sn!=null and sn!='' ">
            AND sn LIKE concat('%', #{sn}, '%')
        </if>
        <if test=" className!=null and className!='' ">
            AND class_name LIKE concat('%', #{className}, '%')
        </if>
    </select>

    <select id="selectAllPartsCategory" resultType="com.kingthy.entity.PartsCategory">
        SELECT create_date createDate,modify_date modifyDate,version,class_name className,uuid,status,image,sn,type,
        model_file modelFile
        FROM parts_category
        WHERE del_flag IS FALSE
    </select>

    <select id="selectByUuid" resultType="com.kingthy.entity.PartsCategory" parameterType="java.lang.String">
        SELECT create_date createDate,modify_date modifyDate,version,class_name className,uuid,status,image,sn,type,
        model_file modelFile
        FROM parts_category
        WHERE del_flag IS FALSE
        AND uuid=#{uuid}
    </select>

    <select id="findPartsCategoryByUuidList" resultType="com.kingthy.entity.PartsCategory">
        SELECT version,class_name className,uuid,status,image,sn,type,
        model_file modelFile
        FROM parts_category
        WHERE del_flag IS FALSE
        AND uuid IN
        <foreach collection="list" open="(" close=")" item="uuid" separator="," index="">
            #{uuid}
        </foreach>
    </select>
</mapper>
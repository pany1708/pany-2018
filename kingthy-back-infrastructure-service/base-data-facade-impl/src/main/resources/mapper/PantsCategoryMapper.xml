<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.kingthy.mapper.PantsCategoryMapper" >


  <!--批量更新-->
  <update id="batchUpdateGoodsNum" >

    UPDATE pants_category
    <trim prefix="set" suffixOverrides=",">
      <trim prefix=" goods_num = case" suffix="end,">
        <foreach collection="list" item="item" index="index">
          when uuid = #{item.paramenterUuid} then  #{item.count}
        </foreach>
      </trim>
    </trim>
    WHERE
    <foreach collection="list" separator="or" item="item" index="index">
      uuid= #{item.paramenterUuid}
    </foreach>
  </update>

  <select id="findByPage" resultType="com.kingthy.entity.PantsCategory" parameterType="com.kingthy.entity.PantsCategory">
    SELECT id,create_date createDate,modify_date modifyDate,version,orders,grade,uuid,
    parent_id parentId,class_name className,type,status,description,creator,
    modifier,goods_num goodsNum
    FROM pants_category
    WHERE del_flag IS FALSE
    <if test=" className!=null and className!='' ">
      AND class_name LIKE concat('%',#{className},'%')
    </if>
    ORDER BY create_date DESC
  </select>

  <select id="findByPage_COUNT" resultType="Long">
    SELECT count(uuid)
    FROM pants_category
    WHERE del_flag IS FALSE
    <if test=" className!=null and className!='' ">
      AND class_name LIKE concat('%',#{className},'%')
    </if>
  </select>

  <select id="selectAllPantsCategoryUuids" resultType="com.kingthy.entity.PantsCategory">
    SELECT uuid FROM
    pants_category
    WHERE del_flag IS FALSE
  </select>

  <select id="selectByUuid" resultType="com.kingthy.entity.PantsCategory" parameterType="java.lang.String">
    SELECT create_date createDate,modify_date modifyDate,version,orders,grade,uuid,
    parent_id parentId,class_name className,type,status,description,goods_num goodsNum
    FROM pants_category
    WHERE del_flag IS FALSE
    AND uuid = #{uuid}
  </select>
</mapper>